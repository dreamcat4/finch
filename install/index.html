<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Finch - Install</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Dreamcat4">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- google_prettify/sons-of-obsidian.css -->
    <!-- google_prettify/desert.css -->
    <!-- google_prettify/sunburst.css -->
    <!-- google_prettify/twitter-bootstrap.css -->
    <!-- google_prettify/default.css -->

<link href='/finch/assets/stylesheets/bootstrap.min-5534befd4bd1fd0a071242cecfe33975.css' type='text/css' rel='stylesheet' media='all'>
<link href='/finch/assets/stylesheets/poole-3c3695b40c100cdb0e4db7753b840b57.css' type='text/css' rel='stylesheet' media='all'>
<link href='/finch/assets/stylesheets/style-cf56b256a9bd3b065ef200cb5c12edb6.css' type='text/css' rel='stylesheet' media='all'>
<link href='/finch/assets/stylesheets/google_prettify/default-twitter-merge-fba10b1d8b0c64b52b9995d391059367.css' type='text/css' rel='stylesheet' media='all'>
    <!-- Favicon and touch icons -->
    <link rel="shortcut icon" href="/finch/assets/media/favicon.ico">
    <!-- <link rel="apple-touch-icon" href="media/apple-touch-icon.png"> -->
    <!-- <link rel="apple-touch-icon" sizes="72x72" href="media/apple-touch-icon-72x72.png"> -->
    <!-- <link rel="apple-touch-icon" sizes="114x114" href="media/apple-touch-icon-114x114.png"> -->
 
  </head>

  <body class="theme-base-08">

    <div class="sidebar">
      <div class="container sidebar-sticky">
    
        <div class="sidebar-about">
    
              <h1 style="margin-bottom: -10px;">
                <a class="sidebar-nav-item" href="/finch">Finch</a>
              </h1>
    
          <!-- <p class="lead">FreeBSD... in a chroot!</p> -->
    
          <p class="lead">Freebsd... <strong><i>in a chroot!</i></strong></p>
          <!-- <p class="lead">Freebsd <strong><i>in a chroot!</i></strong></p> -->
    
          <!-- <div class="lead">Freebsd... <strong></div>
            <div class="lead"><i>&nbsp&nbsp&nbsp&nbsp&nbspin a chroot!</i></strong></div> -->
    
        </div>
    
        <ul class="sidebar-nav">
    
                <li>
                  <a href="/finch/install" class="sidebar-nav-item-active">Install</a>
                </li>
                <li class="sidebar-nav-item"><a href="/finch/usage">Usage</a></li>
                <li class="sidebar-nav-item"><a href="/finch/manpage">Manpage</a></li>
                <li class="sidebar-nav-item"><a href="/finch/faq">FAQ</a></li>
                <li class="sidebar-nav-item"><a href="/finch/jails-how-to">Jails How To</a></li>
                <li class="sidebar-nav-item"><a href="/finch/jails-ip-addresses">Jails Ip Addresses</a></li>
                <li class="sidebar-nav-item"><a href="/finch/jails-ssh">Jails Ssh</a></li>
                <li class="sidebar-nav-item"><a href="/finch/mounting-filesystems">Mounting Filesystems</a></li>
                <li class="sidebar-nav-item"><a href="/finch/qjail-reference">Qjail Reference</a></li>
                <li class="sidebar-nav-item"><a href="/finch/upgrading">Upgrading</a></li>
                <li class="sidebar-nav-item"><a href="/finch/support">Support</a></li>
    
              <!-- <li><a href="/finch/faq">FAQ</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/faq">FAQ</a></li> -->
              <!-- <li><a href="/finch/finch-8">Finch 8</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/finch-8">Finch 8</a></li> -->
              <!-- <li><a href="/finch">Index</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch">Index</a></li> -->
              <!-- <li class="active"><a href="/finch/install" class="active">Install</a></li> -->
              <!-- <li class="sidebar-nav-item-active"> -->
              <!-- <li>
                <a href="/finch/install" class="sidebar-nav-item-active">Install</a>
              </li> -->
              <!-- <li><a href="/finch/jails-how-to">Jails How To</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/jails-how-to">Jails How To</a></li> -->
              <!-- <li><a href="/finch/jails-ip-addresses">Jails Ip Addresses</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/jails-ip-addresses">Jails Ip Addresses</a></li> -->
              <!-- <li><a href="/finch/jails-ssh">Jails Ssh</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/jails-ssh">Jails Ssh</a></li> -->
              <!-- <li><a href="/finch/manpage">Manpage</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/manpage">Manpage</a></li> -->
              <!-- <li><a href="/finch/mounting-filesystems">Mounting Filesystems</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/mounting-filesystems">Mounting Filesystems</a></li> -->
              <!-- <li><a href="/finch/portsnap_override-8">Portsnap_override 8</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/portsnap_override-8">Portsnap_override 8</a></li> -->
              <!-- <li><a href="/finch/qjail-reference">Qjail Reference</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/qjail-reference">Qjail Reference</a></li> -->
              <!-- <li><a href="/finch/support">Support</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/support">Support</a></li> -->
              <!-- <li><a href="/finch/upgrading">Upgrading</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/upgrading">Upgrading</a></li> -->
              <!-- <li><a href="/finch/usage">Usage</a></li> -->
              <!-- <li class="sidebar-nav-item"><a href="/finch/usage">Usage</a></li> -->
    
              <!-- <a href="https://github.com/dreamcat4/finch/issues">Bugtracker</a> -->
    
                <!-- <li class="sidebar-nav-item{% if page.url == node.url %} active{% endif %}"> -->
    
    
    
                  <!-- <a href=""></a> -->
    
                  <!-- 
                    
                      <li><a href="/finch/faq">FAQ</a></li>
                    
                  
                    
                      <li><a href="/finch/finch-8">Finch 8</a></li>
                    
                  
                    
                      <li><a href="/finch">Index</a></li>
                    
                  
                      <li class="active"><a href="/finch/install" class="active">Install</a></li>
                    
                    
                  
                    
                      <li><a href="/finch/jails-how-to">Jails How To</a></li>
                    
                  
                    
                      <li><a href="/finch/jails-ip-addresses">Jails Ip Addresses</a></li>
                    
                  
                    
                      <li><a href="/finch/jails-ssh">Jails Ssh</a></li>
                    
                  
                    
                      <li><a href="/finch/manpage">Manpage</a></li>
                    
                  
                    
                      <li><a href="/finch/mounting-filesystems">Mounting Filesystems</a></li>
                    
                  
                    
                      <li><a href="/finch/portsnap_override-8">Portsnap_override 8</a></li>
                    
                  
                    
                      <li><a href="/finch/qjail-reference">Qjail Reference</a></li>
                    
                  
                    
                      <li><a href="/finch/support">Support</a></li>
                    
                  
                    
                      <li><a href="/finch/upgrading">Upgrading</a></li>
                    
                  
                    
                      <li><a href="/finch/usage">Usage</a></li>
                    
                   -->
    
    
                </li>
              <!-- {% endif %}
            {% endif %}
          {% endfor %} -->
    
          <!-- <li class="sidebar-nav-item"><a href="dreamcat4/finch/archive/v.zip">Download</a></li> -->
          <!-- <li class="sidebar-nav-item"><a href="https://github.com/dreamcat4/finch">GitHub Project</a></li> -->
          <!-- <li class="sidebar-nav-item">Currently v</li> -->
    
          <!-- <li class="sidebar-nav-item"><a href="https://github.com/dreamcat4/finch">GitHub Project</a></li> -->
          
          <p></p>
          <!-- <p></p> -->
        </ul>
        <!-- <p> -->
        <p>
          <!-- <class="crumbline" style="color: #515151; font-size: 16px; font-style: italic; font-weight: 400;" href="https://github.com/dreamcat4/finch">GitHub Project</a> -->
          <!-- <a class="sidebar-nav" class="crumbline" style="color: #515151; font-size: 16px; font-style: italic; font-weight: 400;" href="https://github.com/dreamcat4/finch">GitHub Project</a> -->
    
          <!-- <a class="sidebar-nav" class="crumbline" style="color: #515151; font-size: 16px; font-style: italic; font-weight: 400;" href="#toc_0">Back to Top</a> -->
    
          <a class="sidebar-nav" class="crumbline" style="color: #515151; font-size: 16px; font-style: italic; font-weight: 400;" href="/finch/install">Back to Top</a>
    
          <!-- Â© 2014. All rights reserved. -->
        </p>
    
        <!-- <p>&copy; {--{ site.time | date: '%Y' }--}. All rights reserved.</p> -->
      </div>
    </div>
    

    <div class="navbar">
      <div class="navbar-inner">
        <!-- <div class="container-narrow"> -->
          <!-- <a class="brand" href="/finch/">Finch</a> -->
    
          <!-- <p class="navbar-left"> -->
          <div class="navbar-left">
    
            <!-- Project hosted on Github <a href="https://github.com/dreamcat4/finch">dreamcat4/finch</a> -->
    
            <ul class="nav">
                  <li><a href="/finch">Home</a></li>
    
                
                  <li><a href="/finch/manpage">Manpage</a></li>
                
                  <li class="active"><a href="/finch/install" class="active">Install</a></li>
                
                
                
                  <li><a href="/finch/faq">FAQ</a></li>
                
    
            </ul>
    
          <!-- </p> -->
          </div>
    
    
          <!-- <p class="footer-center">
          </p> -->
    
          <!-- <p class="navbar-right"> -->
          <div class="navbar-right">
    
            <!-- &copy; Dreamcat4 2014,  -->
            <!-- FreeBSD Licensing terms. -->
    
    
            <ul class="nav">
    
                
                  <li><a href="/finch/jails-how-to">Jails How To</a></li>
                
                
                  <li><a href="/finch/upgrading">Upgrading</a></li>
                
                
                  <li><a href="/finch/support">Support</a></li>
                
    
              <!--  -->
    
              <!-- 
                
                  <li><a href="/finch/faq">FAQ</a></li>
                
              
                
                  <li><a href="/finch/finch-8">Finch 8</a></li>
                
              
                
                  <li><a href="/finch">Index</a></li>
                
              
                  <li class="active"><a href="/finch/install" class="active">Install</a></li>
                
                
              
                
                  <li><a href="/finch/jails-how-to">Jails How To</a></li>
                
              
                
                  <li><a href="/finch/jails-ip-addresses">Jails Ip Addresses</a></li>
                
              
                
                  <li><a href="/finch/jails-ssh">Jails Ssh</a></li>
                
              
                
                  <li><a href="/finch/manpage">Manpage</a></li>
                
              
                
                  <li><a href="/finch/mounting-filesystems">Mounting Filesystems</a></li>
                
              
                
                  <li><a href="/finch/portsnap_override-8">Portsnap_override 8</a></li>
                
              
                
                  <li><a href="/finch/qjail-reference">Qjail Reference</a></li>
                
              
                
                  <li><a href="/finch/support">Support</a></li>
                
              
                
                  <li><a href="/finch/upgrading">Upgrading</a></li>
                
              
                
                  <li><a href="/finch/usage">Usage</a></li>
                
               -->
            </ul>
    
          <!-- </p> -->
          </div>
    
        <!-- </div> -->
      </div>
    </div>
    

    <div class="logo"></div>

    <div class="container-narrow">

      <div class="content">
        <p><ul>
<li>
<a href="#toc_0">Install</a>
</li>
<li>
<a href="#toc_1">Installer options</a>
</li>
<li>
<a href="#toc_2">Pre-Install steps</a>
<ul>
<li>
<a href="#toc_3">pfSense</a>
<ul>
<li>
<a href="#toc_4">Prepping a new hard disk</a>
</li>
<li>
<a href="#toc_5">Getting pfSense to mount your hard disk(s) at boot time</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_6">Post-Install Steps</a>
<ul>
<li>
<a href="#toc_7">NAS4Free</a>
<ul>
<li>
<a href="#toc_8">Configure administrator accounts</a>
</li>
<li>
<a href="#toc_9">Add bootup / shutdown scripts</a>
</li>
<li>
<a href="#toc_10">Start the Finch FreeBSD installation process</a>
</li>
</ul>
</li>
<li>
<a href="#toc_11">FreeNAS</a>
<ul>
<li>
<a href="#toc_12">FreeNAS services not working after reboot ?</a>
</li>
<li>
<a href="#toc_13">Configure root &amp; administrator accounts</a>
</li>
<li>
<a href="#toc_14">Add bootup / shutdown scripts</a>
</li>
<li>
<a href="#toc_15">Start the Finch FreeBSD installation process</a>
</li>
</ul>
</li>
<li>
<a href="#toc_16">pfSense</a>
<ul>
<li>
<a href="#toc_17">Configure admin accounts</a>
</li>
<li>
<a href="#toc_18">Install the &#39;ShellCmd&#39; Package</a>
</li>
<li>
<a href="#toc_19">Add bootup script</a>
</li>
<li>
<a href="#toc_20">Start the Finch FreeBSD installation process</a>
</li>
</ul>
</li>
<li>
<a href="#toc_21">FreeBSD-GENERIC</a>
<ul>
<li>
<a href="#toc_22">Configure root &amp; administrator accounts</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</p>

<h1 id="toc_0">Install</h1>

<ul>
<li>Check that your system matches the <a href="/finch/#toc_3">Platform Requirements</a>.</li>
<li><em>pfSense only</em> - follow the <a href="#toc_2">Pre-Install Steps</a>.</li>
<li>Login as the <code>root</code> user. Then copy-paste these 3 commands into your terminal window:</li>
</ul>

<pre><code>/bin/sh
alias finch-bootstrap=&quot;SSL_NO_VERIFY_PEER=YES fetch -q -o - http://git.io/HxXrsw | sh -s --&quot;
finch-bootstrap --help
</code></pre>

<ul>
<li>Typing <a href="#toc_1"><code>finch-bootstrap --help</code></a> will show you the available installer options.</li>
<li>Under normal conditions the default settings should be fine.</li>
</ul>

<p>To install Finch,</p>

<pre><code>finch-bootstrap install --dir &quot;/path/to/finch&quot;
</code></pre>

<p>Then follow the platform-specific <strong><em><a href="#toc_6">post install steps</a></em></strong>, which you must do after running the installer.</p>

<ul>
<li>The Finch &quot;bootstrap&quot; installer will run it&#39;s preflight checks and ask for confirmation before continuing.</li>
<li><p>You will be guided through the remainder of the installation process.</p></li>
<li><p>Follow carefully any instructions being printed by the <code>finch-bootstrap</code> installer. Those messages provide valuable information about your Finch setup and help to avoid any unnecessary issues.</p></li>
<li><p>On FreeNAS / NAS4Free it is worth configuring SMTP email in the Web GUI. Be sure to also set a &quot;to:&quot; destination address in your SMARTD email settings. Then you will be emailed progress updates during installation.</p></li>
</ul>

<h1 id="toc_1">Installer options</h1>

<pre><code>$ finch-bootstrap --help

Usage:
    $ finch-bootstrap &quot;command&quot; [--options]

Example:
    $ finch-bootstrap install --dir &quot;/mnt/disk0/finch&quot;

Commands:

    install   - Install a new copy of Finch FreeBSD.
    uninstall - Uninstall a copy of Finch FreeBSD.
    update    - Update the finch command and finch scripts to the latest version.
    move      - Move/rename the paths/locations to this copy of finch.

Options:

    -d, --dir &quot;{realpath}&quot;
         The full installation &quot;/path/to/finch&quot;. Defaults to &quot;\$PWD/finch&quot;.
         ~ if not set a new subdirectory will be created here named &quot;finch&quot;.
         Internally referred to as &quot;$finch_realpath&quot; - the chroot directory.

    -y, --yes
         Do not prompt for user confirmation before continuing. Useful
         for unattended operations or launching from other scripts.

    -f, --force
         Do not exit when a potential problem is encountered. Continue
         regardless of all warnings and errors.

    -e, --dest-dir &quot;{dest_dir}&quot;
         (move) A destination path where to move this installation.
         Where the current location is specified by &quot;--dir {realpath}&quot;.

    -t, --txz-distfiles-dir &quot;{txz_distfiles_dir}&quot;
         (install) A local folder from which to obtain the FreeBSD &quot;.txz&quot;
         distribution files from (&quot;distfiles&quot;), &quot;base.txz&quot;... etc. With this
         option *nothing* will be downloaded from ftp://ftp.freebsd.org.
         You will be locally responsible for ensuring a correct set of
         distribution files is present. All &quot;*.txz&quot; files found in the folder
         will be unpacked / installed to the target directory (&quot;--dir {dir}&quot;).

    -x, --debug
         Debugging output. Switches on &quot;set -x&quot; to echo all commands.

    -h, --help
         Display this message and exit.

Bugs:
    Can be reported at http://dreamcat4.github.io/finch/support

Created by:
    Dreamcat4, dreamcat4@gmail.com (C 2014). FreeBSD License.
</code></pre>

<h1 id="toc_2">Pre-Install steps</h1>

<h2 id="toc_3">pfSense</h2>

<p>Finch requires at least 5GB of hard disk space on a UFS partition. Finch should only be installed on a regular hard disk and not on a USB Flash drive.</p>

<p>If you have already installed pfSense onto hard disk, then the drive where you have installed pfSense may already be suitable and meet those requirements.</p>

<h3 id="toc_4">Prepping a new hard disk</h3>

<p>If you are running pfSense from an embedded image (which is the best way and recommended), then you will have to manually format, mount and prep the hard disk. These steps assume a blank or unformatted hard disk is already installed into the target machine</p>

<pre><code># Ensure you are in a POSIX.2 (ISO-compliant) shell. To avoid any confusion.
/bin/sh

# 1.a. Locate and identify which device name your hard disk is represented by
dmesg | grep -E &#39;ad[0-9]|da[0-9]&#39;

# 1.b. Don&#39;t get this wrong. Double-check.
camcontrol devlist

# 1.c. Check for any existing partitions on attached disks
ls -l /dev/

# Put here the device name of your hard drive. Ours was &quot;/dev/adz1&quot;
disk=&quot;adz1&quot;

# Destroy previous partition table. This will ruin any data on the disk
dd if=&quot;/dev/zero&quot; of=&quot;/dev/$disk&quot; bs=&quot;64k&quot; count=&quot;100&quot;

# Format the disk as UFS. Creates one big partition
newfs &quot;/dev/$disk&quot;

# Remount the root &quot;/&quot; filesystem as read-write
[ &quot;$(mount | grep -e &quot;on / &quot; | grep read-only)&quot; ] &amp;&amp; mount -o noatime -u -w &quot;/&quot;

# Put here the mountpoint for your new drive
mountpoint=&quot;/mnt/disk0&quot;

# Create the folder for our mountpoint
mkdir -p &quot;$mountpoint&quot;

# Add new fstab entry
echo &quot;/dev/$disk $mountpoint ufs rw 1 1&quot; &gt;&gt; &quot;/etc/fstab&quot;

# Check that it worked
mount -a &amp;&amp; df -h
</code></pre>

<h3 id="toc_5">Getting pfSense to mount your hard disk(s) at boot time</h3>

<p>We have done everything correctly, but pfSense still needs some slight modification to respectfully mount your <code>fstab</code> file, as it should. Yet pfSense / nanoBSD will not automatically do a <code>mount -a</code> during boot time like regular FreeBSD-GENERIC. Sensible? No. Easily fixed? Yes.</p>

<p>Run this script to correct the issue. It will instll a small boot script to <code>mount -a</code> and perform <code>fsck</code> check if necessary<sup>1.</sup> Just copy-paste these lines into your terminal (as root):</p>

<pre><code>/bin/sh
alias pfmount_install=&quot;SSL_NO_VERIFY_PEER=YES fetch -q -o - http://git.io/NBLjxw | sh -s --&quot;
pfmount_install

# Check that your fstab disk mounts are persistent across reboots
reboot
df -h
cat /etc/fstab
</code></pre>

<p><sup>1</sup> Note: If you upgrade or re-install pfSense in the future, your fstab file and also this boot script may disappear. You data and Finch installation should be safe however. Just re-create the fstab file, re-run <code>pfmount_install</code> and you should be fine.</p>

<h1 id="toc_6">Post-Install Steps</h1>

<p>Choose your platform from the list below.</p>

<ul>
<li><a href="#toc_7">NAS4Free</a></li>
<li><a href="#toc_11">FreeNAS</a></li>
<li><a href="#toc_16">pfSense</a></li>
<li><a href="#toc_21">FreeBSD-GENERIC</a></li>
</ul>

<h2 id="toc_7">NAS4Free</h2>

<p>These steps should be followed after installation.</p>

<h3 id="toc_8">Configure administrator accounts</h3>

<p>Finch will automatically configure the root account for you. These steps should be followed for any other normal users who you want to be administrators, and use Finch too.</p>

<ul>
<li>In the NAS4Free Web GUI Go to <code>Access|Users</code></li>
<li>Click the spanner icon, <code>Edit User</code></li>
<li>Select Group <strong><code>wheel</code></strong></li>
<li>Select <strong><code>bash</code></strong> as The User&#39;s login shell.</li>
<li>Click --&gt; <code>Save</code> --&gt; <code>Apply changes</code>.</li>
</ul>

<h3 id="toc_9">Add bootup / shutdown scripts</h3>

<ul>
<li>In the NAS4Free Web GUI</li>
</ul>

<p>Go to <code>System|Advanced|Command Scripts</code></p>

<ul>
<li>Click <code>+</code> and add the following <code>POSTINIT</code> script:</li>
</ul>

<pre><code>/path/to/finch/etc/finch/postinit
</code></pre>

<ul>
<li>Click <code>+</code> and add the following <code>SHUTDOWN</code> script:</li>
</ul>

<pre><code>/path/to/finch/etc/finch/shutdown
</code></pre>

<p><strong><em><span class="mar">Take note!</span></em></strong> The above text <code>/path/to/finch</code> is not a real path. Instead you must put the real directory where Finch is located on the filesystem. For example, if you are installing Finch into <code>/mnt/disk0/finch</code>, then the correct startup and shutdown commands would be:</p>

<pre><code>/mnt/disk0/finch/etc/finch/postinit
/mnt/disk0/finch/etc/finch/shutdown
</code></pre>

<h3 id="toc_10">Start the Finch FreeBSD installation process</h3>

<ul>
<li>Reboot your NAS4Free system. Installation will begin on next boot.</li>
<li>To check progress login on the command line and type:</li>
</ul>

<pre><code>tail -99999 -f /path/to/finch/var/log/finch/install.log
</code></pre>

<ul>
<li>Installation will take anywhere from 20 minutes up to 1 hour.</li>
</ul>

<h2 id="toc_11">FreeNAS</h2>

<p>These steps should be followed after installation.</p>

<h3 id="toc_12">FreeNAS services not working after reboot ?</h3>

<ul>
<li>You will find that FreeNAS services do not start correctly after Finch installation.</li>
<li>The problem occurs whilst Finch is installing FreeBSD, during the first reboot.</li>
</ul>

<p>FreeNAS services are not started until after all <code>POSTINIT</code> scripts have finished execution. So after the first reboot (during Finch installation) the <code>etc/finch/postinit</code> will take much longer to complete. Anywhere from <strong><em>20 minutes</em></strong> up to <strong><em>1 hour</em></strong>.</p>

<p><strong><em>Symptom:</em></strong></p>

<ul>
<li>The service will not start up properly after the first reboot.
For example - ssh: error: &quot;connection refused&quot;</li>
<li>Other FreeNAS services may also be offline.</li>
</ul>

<p><strong><em>Solution #1:</em></strong></p>

<ul>
<li>Re-enable the service (toggle the switch on-&gt;off-&gt;on) in the FreeNAS Web GUI.
This has been found to work for the ssh service.</li>
</ul>

<p><strong><em>Solution #2:</em></strong></p>

<ul>
<li>Wait until Finch has finished installing everything.
The daemon is will start normally once Finch POSTINIT has completed.</li>
</ul>

<h3 id="toc_13">Configure root &amp; administrator accounts</h3>

<ul>
<li>In the FreeNAS Web GUI Expand <code>+ Account</code> --&gt; <code>+ Users</code> --&gt; <code>View Users</code></li>
<li>Select the account from the list of all users. Click to highlight the entry.</li>
<li>Click the <code>Modify User</code> button that appears.</li>
<li>Select Shell: <strong><code>bash</code></strong>.</li>
<li>Select <code>Auxilary Groups</code> &gt;&gt; <strong><code>wheel</code></strong>.</li>
<li>Click <code>OK</code> to close the window and save changes.</li>
</ul>

<h3 id="toc_14">Add bootup / shutdown scripts</h3>

<ul>
<li>In the FreeNAS Web GUI:</li>
</ul>

<p>Expand <code>+ System</code> --&gt; <code>+ Init/Shutdown Scripts</code> --&gt; <code>Add Init/Shutdown Script</code></p>

<ul>
<li>Select Type: <code>Script</code> and add the following <code>POSTINIT</code> script:</li>
</ul>

<pre><code>/path/to/finch/etc/finch/postinit
</code></pre>

<ul>
<li>Select Type: <code>Script</code> and add the following <code>SHUTDOWN</code> script:</li>
</ul>

<pre><code>/path/to/finch/etc/finch/shutdown
</code></pre>

<p><strong><em><span class="mar">Take note!</span></em></strong> The above text <code>/path/to/finch</code> is not a real path. Instead you must put the real directory where Finch is located on the filesystem. For example, if you are installing Finch into <code>/mnt/disk0/finch</code>, then the correct startup and shutdown commands would be:</p>

<pre><code>/mnt/disk0/finch/etc/finch/postinit
/mnt/disk0/finch/etc/finch/shutdown
</code></pre>

<h3 id="toc_15">Start the Finch FreeBSD installation process</h3>

<ul>
<li>Reboot your FreeNAS system. Installation will begin on next boot.</li>
<li>To check progress login on the command line and type:</li>
</ul>

<pre><code>tail -99999 -f /path/to/finch/var/log/finch/install.log
</code></pre>

<ul>
<li>Installation will take anywhere from 20 minutes up to 1 hour.</li>
</ul>

<h2 id="toc_16">pfSense</h2>

<h3 id="toc_17">Configure admin accounts</h3>

<p>Create user account(s) which are a member of the <code>admins</code> group.</p>

<ul>
<li>In the pfSense Web GUI</li>
</ul>

<p>Go to <code>System|User Manager</code></p>

<p>Create or edit a user by clicking <code>+</code> or <code>e</code>.</p>

<p>In the <code>Group Memberships</code> section:</p>

<ul>
<li><p>Highlight <code>admins</code>, and Click <code>&gt;</code> to make the user a member of the <code>admins</code> group</p></li>
<li><p>Click the <code>Save</code> button to save changes.</p></li>
</ul>

<h3 id="toc_18">Install the &#39;ShellCmd&#39; Package</h3>

<ul>
<li>In the pfSense Web GUI</li>
</ul>

<p>Go to <code>System|Packages</code></p>

<p>Go to <code>Available Packages|Services</code></p>

<ul>
<li>Click <code>+</code> next to the <code>Shellcmd</code> Package, and install it.</li>
</ul>

<h3 id="toc_19">Add bootup script</h3>

<ul>
<li>In the pfSense Web GUI</li>
</ul>

<p>Go to <code>Services|ShellCmd</code></p>

<ul>
<li>Click <code>+</code> and add the following <code>shellcmd</code> script:</li>
</ul>

<pre><code>/path/to/finch/etc/finch/postinit
</code></pre>

<p><strong><em><span class="mar">Take note!</span></em></strong> The above text <code>/path/to/finch</code> is not a real path. Instead you must put the real directory where Finch is located on the filesystem. For example, if you are installing Finch into <code>/mnt/disk0/finch</code>, then the correct startup command would be:</p>

<pre><code>/mnt/disk0/finch/etc/finch/postinit
</code></pre>

<h3 id="toc_20">Start the Finch FreeBSD installation process</h3>

<ul>
<li>Reboot your pfSense system. Installation will begin on next boot.</li>
<li>To check progress login on the command line and type:</li>
</ul>

<pre><code>tail -99999 -f /path/to/finch/var/log/finch/install.log
</code></pre>

<ul>
<li>Installation will take anywhere from 20 minutes up to 1 hour.</li>
<li>During this time certain pfSense services may be unavailable.</li>
</ul>

<h2 id="toc_21">FreeBSD-GENERIC</h2>

<p>These steps should be followed after installation.</p>

<h3 id="toc_22">Configure root &amp; administrator accounts</h3>

<ul>
<li>Be a member of group wheel</li>
</ul>

<pre><code>$ &quot;pw user mod $USER -G wheel&quot;
</code></pre>

<ul>
<li>Set `bash` or `sh` as your default login shell</li>
</ul>

<pre><code>$ &quot;pw user mod $USER -s /usr/local/bin/bash&quot;
</code></pre>

<ul>
<li>Close any open terminals or shells and log back in again</li>
</ul>

<pre><code>$ &quot;. /etc/profile&quot; will re-source profile for this shell
</code></pre>

<ul>
<li>Reboot or issue &quot;finch refresh&quot; on the command line.</li>
</ul>

      </div>

      <!-- last linebreak for manpage -->
      <p style="line-height: 0px;">&nbsp;</p> 

      <div class="footer">
        <hr class="footer-hr">
      
        <!-- order is backwards b/c footer-left style isnt loaded -->
        <div class="footer-left" style="float: left; position: absolute;">
          <!-- Project hosted on Github <a href="https://github.com/dreamcat4/finch">dreamcat4/finch</a> -->
          Project hosted on Github @ <a href="https://github.com/dreamcat4/finch">dreamcat4/finch</a>.
        </div>
        <div class="footer-right" style="float: right; position: relative;">
          &copy; Dreamcat4 2014, 
           FreeBSD License.
        </div>
      
        <div style="clear: both;"></div>â
      </div>
      

    </div> <!-- /container -->

    <!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint ";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
    
    
  </body>
</html>
